<!doctype html><html><head><meta charset=utf-8><title>jQueryで外部リンクを新規ウィンドウで開きアイコンを付ける。</title><meta name=viewport content="width=device-width"><meta name=description content=""><!-- Twitter --><meta name=twitter:card content=summary><meta name=twitter:author content=@howtohp><meta name=twitter:title content=jQueryで外部リンクを新規ウィンドウで開きアイコンを付ける。><meta name=twitter:description content=""><!-- Facebook --><meta property=og:type content=article><meta property=og:title content=jQueryで外部リンクを新規ウィンドウで開きアイコンを付ける。><meta property=og:description content=""><meta property=og:url content="http:howtohp.com/2008/10/19/external/"><meta property=og:locale content=ja-JP><meta property=article:published_time content="2008-10-19 00:00:00 +0900"><link rel=stylesheet href=/assets/css/main.1d3b.css></head><body itemscope itemtype=http://schema.org/Blog lang=ja><header class="header container" role=banner><div class=header__title><h1><a href="/">howtohp</a></h1></div><nav class=global-nav role=navigation><ul class=global-nav__list><li class=global-nav__item><a class=global-nav__link href="/">HOME</a></li><li class=global-nav__item><a class=global-nav__link href=/archive>Archive</a></li><li class=global-nav__item><a class=global-nav__link href=/about>About</a></li></ul></nav></header><div class="main container--small" role=main><article class="entry h-entry" itemscope itemtype=http://schema.org/BlogPosting><header class=entry__header><h1 class=entry__title itemprop=name>jQueryで外部リンクを新規ウィンドウで開きアイコンを付ける。</h1><div class=entry__meta><time class=entry__published itemprop=datePublished datetime="19 Oct 2008"><span class=icon-calendar></span> 19 Oct, 2008</time><div class=entry__tags><span class=icon-tags></span><ul class=entry__tags__list><li class=entry__tags__item itemprop=keywords>jQuery</li></ul></div></div><!-- / .entry__meta --></header><div class=entry__content itemprop=articleBody><p>以前にも書いたエントリーなんですが、消しちゃったので、リライトです。</p><p>外部リンクを新規ウィンドウで開くっていうのを実現しようとすると、aタグのtarget属性に&#8221;_blank&#8221;を指定するんですが、<span class=caps>DOCTYPE</span>宣言がstrictの場合、target属性が非推奨で使えないので、Javascriptで実現するしかないわけです。</p><p>なので、httpもしくは、httpsで始まるものを新規ウィンドウで開くようにし、ついでに、外部リンクの場合、ユーザビリティの向上のために、外部リンクであるとわかりやすいようにアイコンも付けれるように会社の人にjQueryを使って書いてもらいました。</p><p>以下がソースです。</p><div class=highlight><pre><code class=js><span class=nx>$</span><span class=p>(</span><span class=kd>function</span><span class=p>(){</span>
    <span class=kd>var</span> <span class=nx>domains</span> <span class=o>=</span> <span class=p>[</span><span class=nb>document</span><span class=p>.</span><span class=nx>domain</span><span class=p>,</span><span class=s1>&#39;www.hoge.co.jp&#39;</span><span class=p>,</span><span class=s1>&#39;hoge.co.jp&#39;</span><span class=p>];</span>
    <span class=kd>var</span> <span class=nx>domain_selector</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=p>,</span><span class=nx>left_str</span><span class=o>=</span> <span class=s2>&quot;:not([href^=http://&quot;</span><span class=p>,</span><span class=nx>left_str_https</span><span class=o>=</span><span class=s2>&quot;:not([href^=https://&quot;</span><span class=p>,</span><span class=nx>right_str</span> <span class=o>=</span> <span class=s2>&quot;])&quot;</span><span class=p>;</span>
    <span class=nx>domain_selector</span> <span class=o>=</span> <span class=nx>left_str</span><span class=o>+</span><span class=nx>domains</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>right_str</span><span class=o>+</span><span class=nx>left_str</span><span class=p>)</span><span class=o>+</span><span class=nx>right_str</span><span class=p>;</span>
    <span class=nx>domain_selector</span><span class=o>+=</span> <span class=nx>left_str_https</span><span class=o>+</span><span class=nx>domains</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>right_str</span><span class=o>+</span><span class=nx>left_str_https</span><span class=p>)</span><span class=o>+</span><span class=nx>right_str</span><span class=p>;</span>

    <span class=nx>$</span><span class=p>(</span><span class=s2>&quot;a[href^=http]&quot;</span><span class=o>+</span><span class=nx>domain_selector</span><span class=o>+</span><span class=s2>&quot;:not(:has(img))&quot;</span><span class=p>).</span><span class=nx>addClass</span><span class=p>(</span><span class=s2>&quot;exlink&quot;</span><span class=p>);</span>
    <span class=nx>$</span><span class=p>(</span><span class=s2>&quot;a[href^=http]&quot;</span><span class=o>+</span><span class=nx>domain_selector</span><span class=p>).</span><span class=nx>click</span><span class=p>(</span><span class=kd>function</span><span class=p>(){</span>
        <span class=nb>window</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>href</span><span class=p>,</span><span class=s2>&quot;_blank&quot;</span><span class=p>);</span>
            <span class=k>return</span> <span class=kc>false</span><span class=p>;</span>
        <span class=p>});</span>
    <span class=p>});</span>
<span class=p>});</span></code></pre></div><p>ここで、httpもしくはhttpsからはじまるsrc属性を持っているaタグににexlinkというクラスをつけているので、そのクラスに<span class=caps>CSS</span>で外部リンク用のアイコンを指定すれば、外部リンクすべてに、アイコンを付けることができます。<br>ちなみに、以前書いていた記事では、aタグの中身が画像でもクラスをつけちゃってたんですが、今回はaタグの中身が画像の場合は除外するようにしています。</p><p>で、関連サイトなんかは外部リンクで<span class=caps>URL</span>で指定していても、新規ウィンドウで開いて欲しくない場合もあるかもしれないので、’www.hoge.com’の部分にドメインを指定します。<br>一応、wwwあり、なし両方指定してます。&nbsp;ここで指定したドメインは新規ウィンドウでは開かないようになってます。</p><p><span class=caps>CSS</span>でアイコンを付けるのは以下のような感じでいいかと思います。</p><div class=highlight><pre><code class=css><span class=nt>a</span><span class=nc>.exlink</span> <span class=p>{</span>
    <span class=k>background-image</span><span class=o>:</span><span class=sx>url(アイコン画像へのパス)</span><span class=p>;</span>
    <span class=k>padding-right</span><span class=o>:</span><span class=m>15px</span><span class=p>;</span>
<span class=p>}</span></code></pre></div><p><span class=caps>CSS</span>で指定している右側のpaddingはアイコン画像の大きさ分＋余白と考えてください。</p></div><div class=entry__comments><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname = 'howtohp';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article><div class=pager><a href="/2008/10/19/rollover/" class=pager__newer title="Previous Post: jQueryで画像置換">&laquo; Newer</a></div><hr><section class="related-posts entries"><h1>関連記事</h1><ul><li class=entries__item><a class=entries__link href="/2008/10/19/rollover/" rel=bookmark title=jQueryで画像置換>jQueryで画像置換</a> <time class=entries__published published="" itemprop=datePublished datetime="19 Oct 2008">19 Oct, 2008</time></li><li class=entries__item><a class=entries__link href="/2009/04/09/css-naked-2009/" rel=bookmark title="今日はCSS Naked Day">今日はCSS Naked Day</a> <time class=entries__published published="" itemprop=datePublished datetime="09 Apr 2009">9 Apr, 2009</time></li><li class=entries__item><a class=entries__link href="/2012/09/22/compass-control-prefix/" rel=bookmark title=Compassでベンダープレフィックスなどのブラウザーサポートを制御する方法>Compassでベンダープレフィックスなどのブラウザーサポートを制御する方法</a> <time class=entries__published published="" itemprop=datePublished datetime="22 Sep 2012">22 Sep, 2012</time></li><li class=entries__item><a class=entries__link href="/2012/07/20/sass-responsive-web-design/" rel=bookmark title=Sassを使ってレスポンシブウェブデザインにする時に覚えておいた方がいいこと4つ>Sassを使ってレスポンシブウェブデザインにする時に覚えておいた方がいいこと4つ</a> <time class=entries__published published="" itemprop=datePublished datetime="20 Jul 2012">20 Jul, 2012</time></li><li class=entries__item><a class=entries__link href="/2011/09/19/compass/" rel=bookmark title=CSS書くならCompass使った方がいいよ。SASS使ってる人なら特に。>CSS書くならCompass使った方がいいよ。SASS使ってる人なら特に。</a> <time class=entries__published published="" itemprop=datePublished datetime="19 Sep 2011">19 Sep, 2011</time></li></ul></section></div><!-- / .main --><div class="footer-container container"><footer class=footer role=contentinfo><div class=social-rss><ul class=social-rss__list><li class=social-rss__item><a href=http://twitter.com/#!/howtohp id=twitter title=Twitter>Twitter</a></li><li class=social-rss__item><a href=http://www.facebook.com/howtohp id=facebook-page title="Facebook Page">Facebook Page</a></li><li class=social-rss__item><a href=http://feeds.feedburner.com/howtohp/ZiSA id=feed title=Feed>feed</a></li></ul></div><p><small class=copy>&#9786;&nbsp;howtohp</small><br>Powered by <a href="http://jekyllrb.com/">Jekyll</a></p></footer></div><!-- / #footer-container --><script src=//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js></script><script src=/assets/js/scripts.c909.js></script><script type=text/javascript>var disqus_shortname = 'howtohp';
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());</script></body></html>