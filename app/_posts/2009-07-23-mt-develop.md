---
layout: post
title: MTで構築する前に準備する事[まとめ]
tags:
- Dreamweaver
- MovableType
meta:
  dsq_thread_id: '547737916'
author:
  email: info@howtohp.com 
  display_name: kymmt
---

# Dreamweaver用拡張機能 for Movable Typeのインストール

普段エディターとして家では、Dreamweaver CS3、会社ではCS４を使用しているのですが、この拡張機能は、MTタグをDreamwaverで補完してくれるというかなりの優れものです。

ある程度MTに慣れてくると、よく使うのMTタグは覚えるのですが、あまりの数が多いので、ぶっちゃけ全て正確に覚えるっていうのは不可能に近いので、ツールに頼っちゃいます。  
たまに、もしかしてこんなタグあるのかなってのが、見つかったりしますので、マストアイテムです。

[Dreamweaver CS3 拡張機能 for Movable Type 4.1](http://www.adobe.com/jp/devnet/dreamweaver/articles/movable_type_41.html)
※CS3とありますが、CS4でも使えます。(Windows 32bit版で確認)

# Dreamweaverでサイトの定義をし、同期をとり、クロークの実行

![サイトの定義](/img/posts/mt-develop/site_definition_thumb.gif)

次にDreamweaverでサイトの定義をし、サーバー上のファイルと同期をとっておきます。  
この時、注意しないといけないのが、MTで吐き出すファイルたちは、記事を投稿する度に更新されるので、その都度ファイルを同期しようとしますが、それらのファイルはローカルで編集することはないので、Dreamweaver上でクロークを実行しておきます。

クロークを実行しておくと、サイト全体の同期をとろうとした時にクロークしているファイルたちは無視して同期します。直接ファイルをアップしたり、同期をとろうとすると無視しません。  
一点だけ、注意点があるのですが、Dreamweaver上のルート直下にあるファイル(フォルダはOK)はクロークを実行できないようです。何故かは不明ですが・・・。

# Movable Typeでテンプレートをファイルへのリンク機能を使用して更新

この機能を使うと、テンプレートをファイルとして吐き出し、そのファイルを編集し、FTPでサーバーにアップロードすれば、そのテンプレートを使用して再構築してくれます。  
つまり、エディターで編集して管理画面で貼り付けするにも一つ一つやらないといけないので、この機能を使えば、一気に複数のテンプレートを編集できます。

![File Link](/img/posts/mt-develop/file_link.gif)

次にファイルへのリンク機能を使用し、全てのテンプレートをファイルへと書き出します。  
方法は簡単で、テンプレートの設定の中にある、ファイルへのリンクの入力エリアに書き出したいファイルへのパスを記述します。

パスは絶対パスでもいけるのかはわかりませんが、相対パスの方がわかりやすい気がします。  
ここで相対パスを指定した場合、ブログの設定で、公開パスを指定した場所がルートになります。また、`../`の用に上のディレクトリを指定することも可能ですが、書き出し先にディレクトリを指定した場合、ディレクトリに書き込み権限が必要になります。

自分の場合は、わかりやすいように、テンプレートの種類ごとにディレクトリをわけています。  
具体的には、以下の様な構成です。


|テンプレートの種類              |保存ディレクトリ      |
|--------------------------------|----------------------|
|インデックステンプレート        |tpl_index             |
|アーカイブテンプレート          |tpl_archive           |
|モジュールテンプレート          |tpl_module            |
|システムテンプレート            |tpl_system            |
|--------------------------------|----------------------|

ディレクトリを分けるときに、フォルダ名をすべて、tplで始めるようにしているのですが、これは、エディターでファイルツリーを表示した時にすべて、近い位置にならんでもらうようにそうしています。

ここまでやれば、MTの管理画面からだけで編集していくよりも、劇的に構築する時間が短縮されると思われます。
