<!DOCTYPE html><html><head><meta charset=utf-8><title>Compassで本番用と開発用で設定を振り分けてみる。</title><meta name=viewport content="width=device-width"><meta name=description content=""><!-- Twitter --><meta name=twitter:card content=summary><meta name=twitter:author content=@howtohp><meta name=twitter:title content=Compassで本番用と開発用で設定を振り分けてみる。><meta name=twitter:description content=""><!-- Facebook --><meta property=og:type content=article><meta property=og:title content=Compassで本番用と開発用で設定を振り分けてみる。><meta property=og:description content=""><meta property=og:url content="http:howtohp.com/css/2012/01/19/compass-environment_setting/"><meta property=og:locale content=ja-JP><meta property=article:published_time content="2012-01-19 00:00:00 +0900"><link rel=stylesheet href=/css/main.2309.css><link rel=stylesheet href=/css/main.2309.css></head><body><header class="header container" role=banner><div class=header__title><h1><a href="/">howtohp</a></h1></div><nav class=global-nav role=navigation><ul class=global-nav__list><li class=global-nav__item><a class=global-nav__link href="/">HOME</a></li><li class=global-nav__item><a class=global-nav__link href=/archive>Archive</a></li><li class=global-nav__item><a class=global-nav__link href=/about>About</a></li></ul></nav></header><div class="main container--small" role=main><article class="entry h-entry" itemscope itemtype=http://schema.org/BlogPosting><header class=entry__header><h1 class=entry__title itemprop=name>Compassで本番用と開発用で設定を振り分けてみる。</h1><div class=entry__meta><time class=entry__published itemprop=datePublished datetime="19 Jan 2012"><span class=icon-calendar></span> 19 Jan, 2012</time><div class=entry__tags><span class=icon-tags></span><ul class=entry__tags__list><li class=entry__tags__item itemprop=keywords>Compass</li></ul></div></div><!-- / .entry__meta --></header><div class=entry__content itemprop=articleBody><p>何故か、去年の9月に書いた前回のCompassについての記事が最近になって、やたらはてブやらTweetやらされてて焦ってます。このタイミングでなんか書かないとと思ったので、この流れに乗って、Compassの設定について。</p><section id=introduction><p>今回は設定なので、導入方法なんかは、<a href="/css/2011/09/19/compass/">前回の記事</a>を参考にしてみてください。</p></section><section id=setting><p>設定を変更するには<code>config.rb</code>ファイルを編集します。<br>今回振り分けるのはoutput_styleとline_commentsの2箇所で、下記の2行を追加するだけです。</p><div class=highlight><pre><code class=ruby><span class=c1>#圧縮するかどうかの設定(:nested, :expanded, :compact, or :compressed)</span>
<span class=n>output_style</span> <span class=o>=</span> <span class=p>(</span><span class=n>environment</span> <span class=o>==</span> <span class=ss>:production</span><span class=p>)</span> <span class=p>?</span> <span class=ss>:compressed</span> <span class=p>:</span> <span class=ss>:expanded</span>

<span class=c1>#SASS内の行番号の出力(true or false)</span>
<span class=n>line_comments</span> <span class=o>=</span> <span class=p>(</span><span class=n>environment</span> <span class=o>==</span> <span class=ss>:production</span><span class=p>)</span> <span class=p>?</span> <span class=ss>:false</span> <span class=p>:</span> <span class=ss>:true</span></code></pre></div><p>config.rbはrubyですので、environmentを三項演算子で条件分岐してます。<br>コロンが連続して続くけど、全く意味が違うってのがなんか変な感じを受けてしまいます。</p><p>で、<code>config.rb</code>の設定、もしくはコマンドのオプションで切り替えます。</p><h1 id=configrb>config.rbの設定</h1><div class=highlight><pre><code class=ruby><span class=c1>#何も書かなければデフォルトは:development</span>
<span class=n>environment</span> <span class=o>=</span> <span class=ss>:development</span></code></pre></div><h1 id=compass>Compassのコマンドオプションで切り替え</h1><div class=highlight><pre><code class=bash>compass watch -e production</code></pre></div><p>一つ注意しなければいけないのが、ファイルの変更が全くない状態で、productionとdevelopmentを切り替えても、ファイルが生成されません。</p><p>前回書いてなかったけど、<code>compass watch</code>の引数に監視するファイルパスを指定しなければ、sass_dirで設定したパスの中身のファイルを全部監視します。</p><p>1つのファイルだけ指定してても、そのファイルがインポートしてるファイルも監視してくれるので、そこら辺が<span class=caps>SASS</span>と違うところかな。</p></section></div></article><div class=pager><a href=# class=pager__prev>&lt;&lt; Prev</a> <a href=# class=pager__next>Next &gt;&gt;</a></div><hr><section class=related-posts><h1>関連記事</h1><ul><li><a rel=bookmark href="/css/2011/09/19/compass/">CSS書くならCompass使った方がいいよ。SASS使ってる人なら特に。</a></li><li><a rel=bookmark href="/tools/2013/04/24/useful-command-line/">Macユーザーなら覚えといた方がいいTerminalの便利なコマンド</a></li><li><a rel=bookmark href="/tools/2011/08/16/homebrew-install/">Macにパッケージ管理ソフトのhomebrewをインストール</a></li><li><a rel=bookmark href="/css/2012/07/20/sass-responsive-web-design/">Sassを使ってレスポンシブウェブデザインにする時に覚えておいた方がいいこと4つ</a></li><li><a rel=bookmark href="/tools/2012/02/08/chrome-developer-tools/">Chrome使いなら覚えといた方がいい、デベロッパーツールのTips (CSS)</a></li></ul></section></div><!-- / .main --><div class="footer-container container"><footer class=footer role=contentinfo><div class=social-rss><ul class=social-rss__list><li class=social-rss__item><a href=http://twitter.com/#!/howtohp id=twitter title=Twitter>Twitter</a></li><li class=social-rss__item><a href=http://www.facebook.com/howtohp id=facebook-page title="Facebook Page">Facebook Page</a></li><li class=social-rss__item><a href=http://feeds.feedburner.com/howtohp/ZiSA id=feed title=Feed>feed</a></li></ul></div><p><small class=copy>&#9786;&nbsp;howtohp</small> Powered by <a href="http://jekyllrb.com/">Jekyll</a></p></footer></div><!-- / #footer-container --><script src=/js/scripts.d5d1.js></script></body></html>