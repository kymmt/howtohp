<!DOCTYPE html><html><head><meta charset=utf-8><title>CSS4で追加されるかもしれないテーブル周りの擬似セレクタについて</title><meta name=viewport content="width=device-width"><meta name=description content=""><!-- Twitter --><meta name=twitter:card content=summary><meta name=twitter:author content=@howtohp><meta name=twitter:title content=CSS4で追加されるかもしれないテーブル周りの擬似セレクタについて><meta name=twitter:description content=""><!-- Facebook --><meta property=og:type content=article><meta property=og:title content=CSS4で追加されるかもしれないテーブル周りの擬似セレクタについて><meta property=og:description content=""><meta property=og:url content="http:howtohp.com/css/2012/02/13/column-selector-level4/"><meta property=og:locale content=ja-JP><meta property=article:published_time content="2012-02-13 00:00:00 +0900"><link rel=stylesheet href=/css/main.50c7.css><link rel=stylesheet href=/css/main.50c7.css></head><body><header class="header container" role=banner><div class=header__title><h1><a href="/">howtohp</a></h1></div><nav class=global-nav role=navigation><ul class=global-nav__list><li class=global-nav__item><a class=global-nav__link href="/">HOME</a></li><li class=global-nav__item><a class=global-nav__link href=/archive>Archive</a></li><li class=global-nav__item><a class=global-nav__link href=/about>About</a></li></ul></nav></header><div class="main container--small" role=main><article class="entry h-entry" itemscope itemtype=http://schema.org/BlogPosting><header class=entry__header><h1 class=entry__title itemprop=name>CSS4で追加されるかもしれないテーブル周りの擬似セレクタについて</h1><div class=entry__meta><time class=entry__published itemprop=datePublished datetime="13 Feb 2012"><span class=icon-calendar></span> 13 Feb, 2012</time><div class=entry__tags><span class=icon-tags></span><ul class=entry__tags__list><li class=entry__tags__item itemprop=keywords>CSS</li></ul></div></div><!-- / .entry__meta --></header><div class=entry__content itemprop=articleBody><p><span class=caps>CSS3</span>では、:nth-childなんかが追加されて行を特定してマッチさせる事ができるようになったり、:emptyで空の要素を指定できるようになって、かなり便利になったんですが、Level&nbsp;4ではさらに列をマッチさせることができるようになるっぽいです。</p><p>追加されるのはGrid-Structural&nbsp;Selectors(表構造セレクターと訳せばいいのかな？)で以下の三つ。</p><ul><li><a href=#column>:column(selector-list)</a></li><li><a href=#nth-column>:nth-column(an+b)</a></li><li><a href=#nth-last-column>:nth-last-column(an+b)</a></li></ul><section id=column><h1 id=columnselector-list>:column(selector-list)</h1><p>これは引数で指定されたセルエレメントにマッチします。</p><h2 id=section>サンプル</h2><h3 id=html><span class=caps>HTML</span></h3><div class=highlight><pre><code class=html><span class=nt>&lt;table&gt;</span>
   <span class=nt>&lt;col</span> <span class=na>span=</span><span class=s>&quot;2&quot;</span> <span class=nt>/&gt;</span>
   <span class=nt>&lt;col</span> <span class=na>class=</span><span class=s>&quot;selected&quot;</span> <span class=nt>/&gt;</span>
   <span class=nt>&lt;tr&gt;</span>
       <span class=nt>&lt;td&gt;</span>A<span class=nt>&lt;/td&gt;</span>
       <span class=nt>&lt;td&gt;</span>B<span class=nt>&lt;/td&gt;</span>
       <span class=nt>&lt;td&gt;</span>C<span class=nt>&lt;/td&gt;</span>
   <span class=nt>&lt;/tr&gt;</span>
   <span class=nt>&lt;tr&gt;</span>
       <span class=nt>&lt;td</span> <span class=na>span=</span><span class=s>&quot;2&quot;</span><span class=nt>&gt;</span>D<span class=nt>&lt;/td&gt;</span>
       <span class=nt>&lt;td&gt;</span>E<span class=nt>&lt;/td&gt;</span>
   <span class=nt>&lt;/tr&gt;</span>
   <span class=nt>&lt;tr&gt;</span>
       <span class=nt>&lt;td&gt;</span>F<span class=nt>&lt;/td&gt;</span>
       <span class=nt>&lt;td</span> <span class=na>span=</span><span class=s>&quot;2&quot;</span><span class=nt>&gt;</span>G<span class=nt>&lt;/td&gt;</span>
   <span class=nt>&lt;/tr&gt;</span>
<span class=nt>&lt;/table&gt;</span></code></pre></div><h3 id=css><span class=caps>CSS</span></h3><div class=highlight><pre><code class=css><span class=nd>:column</span><span class=o>(</span><span class=nt>col</span><span class=nc>.selected</span><span class=o>)</span> <span class=p>{</span>
    <span class=k>background</span><span class=o>:</span> <span class=m>#bada55</span><span class=p>;</span>
<span class=p>}</span></code></pre></div><p>この場合、CとEとGにスタイルが適用されます。</p><p>ここで、<code>display:table;</code>とされてるものや、まだWorking Draftの段階のgrid-layoutでの列はマッチするのかという疑問がでてきたので、Working&nbsp;Draftを見てみると下記のように書いてました。</p><blockquote><p>The :column(selector-list) pseudo-class notation represents a cell element belonging to a column that is represented by the element selected by its&nbsp;argument.</p><p><strong>Column membership is determined based on the semantics of the document language only: whether and how the elements are presented is not considered.</strong> If a cell element belongs to more than one column, it is represented by a selector indicating any of those&nbsp;columns.</p><p><cite>引用:<a href=http://www.w3.org/TR/selectors4/#column-pseudo>Selector Level 4 - ‘:column()’ pseudo-class</a></cite></p></blockquote><p>ざっくり下線部分を訳してみると、<strong>列の集合は、ドキュメント言語のセマンティックスのみに基づいて決定されます。要素がどのように表示されているかは考慮されません。</strong></p><p>翻訳は得意ではないけど、大体こんな感じの意味になるかと思います。</p><p>つまりgrid-layoutや、display:tableとかで表っぽく見せても、見た目だけの話だから考慮しませんと捉えれるんじゃないでしょーか。間違ってたらごめんなさい。</p><p>実際、<span class=caps>CSS</span>で指定されたカラムとマッチさせるにはブラウザー側で、２回<span class=caps>CSS</span>を処理しないといけなくなるので、現実的にはなさそうですよね。たぶんそんなのはダメ的なのが<span class=caps>CSS</span>&nbsp;<span class=caps>2.1</span>で言われてたきがします。</p></section><section id=nth-column><h1 id=nth-columnanb>:nth-column(an+b)</h1><p>これは、<code>:nth-child()</code>と同じ引数を受けつけます。evenやoddも使えます。縦ストライプとか、１列目から4列目までとかそういうのが簡単にできます。</p></section><section id=nth-last-column><h1 id=nth-last-columnanb>:nth-last-column(an+b)</h1><p>これも、<code>:nth-last-child</code>と同じ引数を受けつけます。これを使えばカレンダーの週末の列だけとか、インボイスの小計の列などがサクっと選択できます。</p><h2 id=section-1>サンプル</h2><p>めんどくさいので<span class=caps>HTML</span>は省略します。</p><h3 id=css-1><span class=caps>CSS</span></h3><div class=highlight><pre><code class=css><span class=nd>:nth-last-column</span><span class=o>(</span><span class=nt>-n</span><span class=o>+</span><span class=nt>2</span><span class=o>)</span> <span class=p>{</span>
    <span class=k>background</span><span class=o>:</span> <span class=nb>red</span><span class=p>;</span>
    <span class=k>color</span><span class=o>:</span> <span class=nb>white</span><span class=p>;</span>
<span class=p>}</span></code></pre></div><p>こんな感じで後ろから２列が簡単に選択できます。子要素を選択する:nth-childなどと違って列を選択するので、少し毛色は違いますけど、使い方はほぼ同じなので、導入しやすい方じゃないでしょうか。</p></section><section><h1 id=section-2>最後に</h1><p>まだWorkingDraftの段階なので、将来的に名称が変わったり、削除される可能性もありますけど、これに関しては結構そのままいきそうな気がします。</p><p>メーリングリストなんか読んでみると正規表現でのセレクターの話題が出てたり、Chromeの開発者の一人であり、<span class=caps>CSS</span> <span class=caps>WG</span>のメンバーのTab Atkins&nbsp;Jrさんなんかは、自身のブログで<span class=caps>CSS</span>での変数や、Mixinの仕様を個人的なドラフトとしてブログに書いてたり、<span class=caps>CSS</span>はどんどん進化してますね。</p><p>実は昔、一度だけ<span class=caps>W3C</span>の<span class=caps>TPAC</span>という年に一度の会議に出たことがあるんですが、<span class=caps>CSS</span>&nbsp;<span class=caps>WG</span>の席で、<span class=caps>CSS</span>を良くする事とは、出来る事を増やすという意見で満場一致だったので、今後どんどんプロパティや、機能が増えて複雑化していくことは間違いないようです。</p><p>その時、あんまり複雑化するとパフォーマンスはどうするんだ？というような話が出たのですが、誰が言ったのかは覚えてないですが、”そんなもん、開発者の言い訳だ”みたいな一言でバッサリ斬られてたのが印象的でした。</p><h3 id=section-3>参考サイト</h3><ul><li><a href=http://www.w3.org/TR/selectors4/#table-pseudos class=external><span class=caps>W3C</span> - Selector Level&nbsp;4</a></li><li><a href=http://lists.w3.org/Archives/Public/www-style/2011Jul/0264.html class=external>メーリングリストでの正規表現でのセレクターのスレ</a>(おまけ)</li><li><a href=http://www.xanthir.com/blog/b4AD0 class=external>Tab Atkins Jrさんの個人的な変数のドラフト</a>(おまけ)</li></ul></section></div></article><div class=pager><a href=# class=pager__prev>&lt;&lt; Prev</a> <a href=# class=pager__next>Next &gt;&gt;</a></div><hr><section class=related-posts><h1>関連記事</h1><ul><li><a rel=bookmark href="/css/2012/02/02/hsl-color/">CSS3で追加されたHSLカラーについて</a></li><li><a rel=bookmark href="/css/2012/07/20/sass-responsive-web-design/">Sassを使ってレスポンシブウェブデザインにする時に覚えておいた方がいいこと4つ</a></li><li><a rel=bookmark href="/tools/2013/04/24/useful-command-line/">Macユーザーなら覚えといた方がいいTerminalの便利なコマンド</a></li><li><a rel=bookmark href="/css/2011/05/06/css3-text-shadow/">今更ながら、text-shadowを色々試してみる。</a></li><li><a rel=bookmark href="/css/2012/01/29/html5-placeholder-style/">HTML5のplaceholder属性で、表示される文字色を変更する方法</a></li></ul></section></div><!-- / .main --><div class="footer-container container"><footer class=footer role=contentinfo><div class=social-rss><ul class=social-rss__list><li class=social-rss__item><a href=http://twitter.com/#!/howtohp id=twitter title=Twitter>Twitter</a></li><li class=social-rss__item><a href=http://www.facebook.com/howtohp id=facebook-page title="Facebook Page">Facebook Page</a></li><li class=social-rss__item><a href=http://feeds.feedburner.com/howtohp/ZiSA id=feed title=Feed>feed</a></li></ul></div><p><small class=copy>&#9786;&nbsp;howtohp</small> Powered by <a href="http://jekyllrb.com/">Jekyll</a></p></footer></div><!-- / #footer-container --><script src=/js/scripts.d5d1.js></script></body></html>