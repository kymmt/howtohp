<!doctype html><html><head><meta charset=utf-8><title>MacにHomebrewでMySQLをインストールしてみた。</title><meta name=viewport content="width=device-width"><meta name=description content="WordpressやMTなどのCMS使ったりするには必須なので、インストールしておきました。[MAMP](http://www.mamp.info/en/index.html)とか使えば一緒に入ってるみたいですが、Macには最初っからApacheやPHPが入ってるし、とりあえず今のとこ必要なのはMySQLだけなので、MAMPは使いません。# Homebrewを使ってMySQLをインストールま..."><!-- Twitter --><meta name=twitter:card content=summary><meta name=twitter:title content=MacにHomebrewでMySQLをインストールしてみた。><meta name=twitter:site content=@howtohp><meta name=twitter:description content="WordpressやMTなどのCMS使ったりするには必須なので、インストールしておきました。[MAMP](http://www.mamp.info/en/index.html)とか使えば一緒に入ってるみたいですが、Macには最初っからApacheやPHPが入ってるし、とりあえず今のとこ必要なのはMySQLだけなので、MAMPは使いません。# Homebrewを使ってMySQLをインストールま..."><meta name=twitter:image content=http://howtohp.com/assets/img/icons/icon.png><!-- Facebook --><meta property=og:type content=article><meta property=og:title content=MacにHomebrewでMySQLをインストールしてみた。><meta property=og:description content="WordpressやMTなどのCMS使ったりするには必須なので、インストールしておきました。[MAMP](http://www.mamp.info/en/index.html)とか使えば一緒に入ってるみたいですが、Macには最初っからApacheやPHPが入ってるし、とりあえず今のとこ必要なのはMySQLだけなので、MAMPは使いません。# Homebrewを使ってMySQLをインストールま..."><meta property=og:url content="http://howtohp.com/2011/08/20/homebrew-mysql/"><meta property=og:locale content=ja-JP><meta property=article:published_time content="2011-08-20 00:00:00 +0900"><link rel=canonical href="http://howtohp.com/2011/08/20/homebrew-mysql/"><link rel=alternate type=application/atom+xml href=/feed.xml><link rel=icon href=/assets/img/icons/favicon.ico type=image/x-icon><link rel=prev href="/2011/08/21/css-prefixr/"><link rel=next href="/2011/08/16/homebrew-install/"><link rel=stylesheet href=/assets/css/main.001b.css></head><body itemscope itemtype=http://schema.org/Blog lang=ja><header class="header container" role=banner><div class=header__title><h1><a href="/">howtohp</a></h1></div><nav class=global-nav role=navigation><ul class=global-nav__list><li class=global-nav__item><a class=global-nav__link href="/">HOME</a></li><li class=global-nav__item><a class=global-nav__link href=/archive>Archive</a></li><li class=global-nav__item><a class=global-nav__link href=/about>About</a></li></ul></nav></header><div class="main container--small" role=main><article class="entry h-entry" itemscope itemtype=http://schema.org/BlogPosting><header class=entry__header><h1 class=entry__title itemprop=name>MacにHomebrewでMySQLをインストールしてみた。</h1><div class=entry__meta><time class=entry__published itemprop=datePublished datetime=""><span class=icon-calendar></span> 20 Aug, 2011</time><div class=entry__tags><span class=icon-tags></span><ul class=entry__tags__list><li class=entry__tags__item itemprop=keywords>Homebrew</li><li class=entry__tags__item itemprop=keywords>Mac</li><li class=entry__tags__item itemprop=keywords>MySQL</li></ul></div></div><!-- / .entry__meta --></header><div class=entry__content itemprop=articleBody><p>Wordpressや<span class=caps>MT</span>などの<span class=caps>CMS</span>使ったりするには必須なので、インストールしておきました。</p><p><a href=http://www.mamp.info/en/index.html><span class=caps>MAMP</span></a>とか使えば一緒に入ってるみたいですが、Macには最初っからApacheや<span class=caps>PHP</span>が入ってるし、とりあえず今のとこ必要なのはMy<span class=caps>SQL</span>だけなので、<span class=caps>MAMP</span>は使いません。</p><section id=install_mysql><h1 id=homebrewmysql>Homebrewを使ってMy<span class=caps>SQL</span>をインストール</h1><p>まだインストールしてない方は、前回の<a href="/2011/08/16/homebrew-install/">Macにパッケージ管理ソフトのhomebrewをインストール</a>の記事を参考にインストールしてみてください。</p><p>My<span class=caps>SQL</span>のインストールはターミナルで下記のコマンドを実行</p><div class=highlight><pre><code class=bash>brew install mysql</code></pre></div><p>インストールは超簡単ですね。今日時点では、My<span class=caps>SQL5.5.14</span>がインストールされました。</p><p>インストール中に下記のメッセージが出ると思います。</p><div class=highlight><pre><code class=bash>Set up databases to run AS YOUR USER ACCOUNT with:
    <span class=nb>unset </span>TMPDIR
    mysql_install_db --verbose --user<span class=o>=</span><span class=sb>`</span>whoami<span class=sb>`</span> --basedir<span class=o>=</span><span class=s2>&quot;$(brew --prefix mysql)&quot;</span> --datadir<span class=o>=</span>/usr/local/var/mysql --tmpdir<span class=o>=</span>/tmp

To <span class=nb>set </span>up base tables in another folder, or use a different user to run
mysqld, view the <span class=nb>help </span><span class=k>for </span>mysqld_install_db:
    mysql_install_db --help

and view the MySQL documentation:
  * http://dev.mysql.com/doc/refman/5.5/en/mysql-install-db.html
  * http://dev.mysql.com/doc/refman/5.5/en/default-privileges.html

To run as, <span class=k>for </span>instance, user <span class=s2>&quot;mysql&quot;</span>, you may need to <span class=sb>`</span>sudo<span class=sb>`</span>:
    sudo mysql_install_db ...options...

Start mysqld manually with:
    mysql.server start

    Note: <span class=k>if </span>this fails, you probably forgot to run the first two steps up above

A <span class=s2>&quot;/etc/my.cnf&quot;</span> from another install may interfere with a Homebrew-built
server starting up correctly.

To connect:
    mysql -uroot

To launch on startup:
* <span class=k>if </span>this is your first install:
    mkdir -p ~/Library/LaunchAgents
    cp /usr/local/Cellar/mysql/5.5.14/com.mysql.mysqld.plist ~/Library/LaunchAgents/
    launchctl load -w ~/Library/LaunchAgents/com.mysql.mysqld.plist

* <span class=k>if </span>this is an upgrade and you already have the com.mysql.mysqld.plist loaded:
    launchctl unload -w ~/Library/LaunchAgents/com.mysql.mysqld.plist
    cp /usr/local/Cellar/mysql/5.5.14/com.mysql.mysqld.plist ~/Library/LaunchAgents/
    launchctl load -w ~/Library/LaunchAgents/com.mysql.mysqld.plist

You may also need to edit the plist to use the correct <span class=s2>&quot;UserName&quot;</span>.

Warning: m4 macros were installed to <span class=s2>&quot;share/aclocal&quot;</span>.
Homebrew does not append <span class=s2>&quot;/usr/local/share/aclocal&quot;</span>
to <span class=s2>&quot;/usr/share/aclocal/dirlist&quot;</span>. If an autoconf script you use
requires these m4 macros, you<span class=err>&#39;</span>ll need to add this path manually.
<span class=o>==</span>&gt; Summary
/usr/local/Cellar/mysql/5.5.14</code></pre></div><p>まぁ今からこれやれよってことなんですが、書いてある通り、コマンドを打ち込んでいきます。&nbsp;` Warningとか出ちゃってますが、とりあえずスルーしときます。</p><p>出てきた情報はbrew info&nbsp;mysqlとすればいつでも見直す事ができます。</p><h2 id=section>今のユーザーアカウントでのデータベースのセットアップ</h2><div class=highlight><pre><code class=bash><span class=nb>unset </span>TMPDIR
mysql_install_db --verbose --user<span class=o>=</span><span class=sb>`</span>whoami<span class=sb>`</span> --basedir<span class=o>=</span><span class=s2>&quot;$(brew --prefix mysql)&quot;</span> --datadir<span class=o>=</span>/usr/local/var/mysql --tmpdir<span class=o>=</span>/tmp</code></pre></div><h2 id=mysql>My<span class=caps>SQL</span>のデーモンを手動で起動</h2><div class=highlight><pre><code class=bash>mysql.server start</code></pre></div><h2 id=section-1>起動時に自動起動</h2><div class=highlight><pre><code class=bash>mkdir -p ~/Library/LaunchAgents
&gt;cp /usr/local/Cellar/mysql/5.5.14/com.mysql.mysqld.plist ~/Library/LaunchAgents/
launchctl load -w ~/Library/LaunchAgents/com.mysql.mysqld.plist</code></pre></div><h2 id=section-2>ルートユーザーでログインしてみる</h2><div class=highlight><pre><code class=bash>mysql -u root</code></pre></div><p>これで、いよいよ使えるようになったはずです。<span class=caps>5.5.14</span>ではデフォルトの文字コードが<span class=caps>UTF</span>-8らしく、めんどくさい文字コード変更の設定はいりません。一応、以下のコマンドを実行して文字コードの設定を確認しておきます。</p><div class=highlight><pre><code class=bash>mysql&gt; show variables like <span class=s1>&#39;character_set%&#39;</span><span class=p>;</span>
+--------------------------+------------------------------------------------------+
<span class=p>|</span> Variable_name            <span class=p>|</span> Value                                                <span class=p>|</span>
+--------------------------+------------------------------------------------------+
<span class=p>|</span> character_set_client     <span class=p>|</span> utf8                                                 <span class=p>|</span>
<span class=p>|</span> character_set_connection <span class=p>|</span> utf8                                                 <span class=p>|</span>
<span class=p>|</span> character_set_database   <span class=p>|</span> utf8                                                 <span class=p>|</span>
<span class=p>|</span> character_set_filesystem <span class=p>|</span> binary                                               <span class=p>|</span>
<span class=p>|</span> character_set_results    <span class=p>|</span> utf8                                                 <span class=p>|</span>
<span class=p>|</span> character_set_server     <span class=p>|</span> utf8                                                 <span class=p>|</span>
<span class=p>|</span> character_set_system     <span class=p>|</span> utf8                                                 <span class=p>|</span>
<span class=p>|</span> character_sets_dir       <span class=p>|</span> /usr/local/Cellar/mysql/5.5.14/share/mysql/charsets/ <span class=p>|</span>
+--------------------------+------------------------------------------------------+
8 rows in <span class=nb>set</span> <span class=o>(</span>0.06 sec<span class=o>)</span></code></pre></div><p>こんな感じで出力されれば、おｋですね。後は使い方を覚えるだけです。<br>以上。</p></section></div><div class=entry__comments><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname = 'howtohp';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article><div class=pager><a href="/2011/08/21/css-prefixr/" class=pager__newer title="Previous Post: CSSのベンダープレフィックスをいい感じに追加してくれるPrefixrが便利そう。">&laquo; Newer</a> <a href="/2011/08/16/homebrew-install/" class=pager__older title="Older Post: Macにパッケージ管理ソフトのhomebrewをインストール">Older &raquo;</a></div><hr><section class="related-posts entries"><h1>関連記事</h1><ul><li class=entries__item><a class=entries__link href="/2014/05/07/wordpress-to-jekyll/" rel=bookmark title=ブログをWordpressからJykellに、サーバーをさくらからgithubへ>ブログをWordpressからJykellに、サーバーをさくらからgithubへ</a> <time class=entries__published published="" itemprop=datePublished datetime="07 May 2014">7 May, 2014</time></li><li class=entries__item><a class=entries__link href="/2011/08/16/homebrew-install/" rel=bookmark title=Macにパッケージ管理ソフトのhomebrewをインストール>Macにパッケージ管理ソフトのhomebrewをインストール</a> <time class=entries__published published="" itemprop=datePublished datetime="16 Aug 2011">16 Aug, 2011</time></li><li class=entries__item><a class=entries__link href="/2013/04/24/useful-command-line/" rel=bookmark title=Macユーザーなら覚えといた方がいいTerminalの便利なコマンド>Macユーザーなら覚えといた方がいいTerminalの便利なコマンド</a> <time class=entries__published published="" itemprop=datePublished datetime="24 Apr 2013">24 Apr, 2013</time></li><li class=entries__item><a class=entries__link href="/2011/09/19/compass/" rel=bookmark title=CSS書くならCompass使った方がいいよ。SASS使ってる人なら特に。>CSS書くならCompass使った方がいいよ。SASS使ってる人なら特に。</a> <time class=entries__published published="" itemprop=datePublished datetime="19 Sep 2011">19 Sep, 2011</time></li><li class=entries__item><a class=entries__link href="/2011/08/21/mac-apache-virtual-host/" rel=bookmark title=MacのApacheでヴァーチャルホストを使ってテスト環境の構築>MacのApacheでヴァーチャルホストを使ってテスト環境の構築</a> <time class=entries__published published="" itemprop=datePublished datetime="21 Aug 2011">21 Aug, 2011</time></li></ul></section></div><!-- / .main --><div class="footer-container container"><footer class=footer role=contentinfo><div class=social-rss><ul class=social-rss__list><li class=social-rss__item><a href=http://twitter.com/#!/howtohp id=twitter title=Twitter>Twitter</a></li><li class=social-rss__item><a href=http://www.facebook.com/howtohp id=facebook-page title="Facebook Page">Facebook Page</a></li><li class=social-rss__item><a href=/feed.xml id=feed title=Feed>feed</a></li></ul></div><p><small class=copy>&#9786;&nbsp;howtohp</small><br>Powered by <a href="http://jekyllrb.com/">Jekyll</a></p></footer></div><!-- / #footer-container --><script src=//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js></script><script src=/assets/js/scripts.c909.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-3185102-1', 'howtohp.com');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');</script><script type=text/javascript>var disqus_shortname = 'howtohp';
            (function () {
                var s = document.createElement('script'); s.async = true;
                s.type = 'text/javascript';
                s.src = '//' + disqus_shortname + '.disqus.com/count.js';
                (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
            }());</script></body></html>